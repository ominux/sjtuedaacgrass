* Bandwidth and phase for the three-stage opamp ABNORMAL
 
VIN 1 0 ac 1
 
 

 
* Opamp circuit ------------------------------------------------------------------
 
 
 

 
 
 

 
* M1 2 2 gnd gnd nch3 L=0.5u W=2u
rd_1 2 100 680.0000m
rs_1 0 101 680.0000m
capbd_1 100 0 2.0204f
capbs_1 101 0 2.0204f
gm_1 100 101 2 0 356.6783u
rds_1 100 101 378129.017621
cgs_1 2 101 3.4655f
cgd_1 2 100 6.241515e-16
 
* M2 3 2 gnd gnd nch3 L=0.5u W=2u
rd_2 3 102 680.0000m
rs_2 0 103 680.0000m
capbd_2 102 0 2.0204f
capbs_2 103 0 2.0204f
gm_2 102 103 2 0 48.8346u
rds_2 102 103 2008.73437883
cgs_2 2 103 2.7115f
cgd_2 2 102 2.3483f
 
* M3 8 2 gnd gnd nch3 L=0.5u W=2u
rd_3 8 104 680.0000m
rs_3 0 105 680.0000m
capbd_3 104 0 2.0204f
capbs_3 105 0 2.0204f
gm_3 104 105 2 0 49.2478u
rds_3 104 105 2012.01575811
cgs_3 2 105 2.7129f
cgd_3 2 104 2.3465f
 
* M4 8 8 vdd vdd pch3 L=0.5u W=2u
rd_4 8 106 720.0000m
rs_4 0 107 720.0000m
capbd_4 106 0 1.9221f
capbs_4 107 0 1.9221f
gm_4 106 107 8 0 90.7793u
rds_4 106 107 891186.168791
cgs_4 8 107 3.7140f
cgd_4 8 106 5.429253e-16
 
* M5 4 4 vdd vdd pch3 L=0.5u W=2u
rd_5 4 108 720.0000m
rs_5 0 109 720.0000m
capbd_5 108 0 1.9221f
capbs_5 109 0 1.9221f
gm_5 108 109 4 0 90.4969u
rds_5 108 109 896780.557798
cgs_5 4 109 3.7131f
cgd_5 4 108 5.429253e-16
 
* M6 7 8 vdd vdd pch3 L=0.5u W=2u
rd_6 7 110 720.0000m
rs_6 0 111 720.0000m
capbd_6 110 0 1.9221f
capbs_6 111 0 1.9221f
gm_6 110 111 8 0 21.5412u
rds_6 110 111 11227.2255729
cgs_6 8 111 3.1056f
cgd_6 8 110 2.0453f
 
* M7 27 9 7 7 pch3 L=0.5u W=2u
rd_7 27 112 720.0000m
rs_7 7 113 720.0000m
capbd_7 112 7 1.9221f
capbs_7 113 7 1.9221f
gm_7 112 113 9 7 6.2039f
rds_7 112 113 7.12083342234e+16
cgs_7 9 113 5.42976e-16
cgd_7 9 112 5.4292e-16
 
* M8 28 10 7 7 pch3 L=0.5u W=2u
rd_8 28 114 720.0000m
rs_8 7 115 720.0000m
capbd_8 114 7 1.9221f
capbs_8 115 7 1.9221f
gm_8 114 115 10 7 6.2039f
rds_8 114 115 7.12083342234e+16
cgs_8 10 115 5.42976e-16
cgd_8 10 114 5.4292e-16
 
* M9 12 12 gnd gnd nch3 L=0.5u W=2u
rd_9 12 116 680.0000m
rs_9 0 117 680.0000m
capbd_9 116 0 2.0204f
capbs_9 117 0 2.0204f
gm_9 116 117 12 0 174.9431u
rds_9 116 117 1306505.5484
cgs_9 12 117 3.2242f
cgd_9 12 116 6.241163e-16
 
* M10 12 3 7 7 pch3 L=0.5u W=2u
rd_10 12 118 720.0000m
rs_10 7 119 720.0000m
capbd_10 118 7 1.9221f
capbs_10 119 7 1.9221f
gm_10 118 119 3 7 50.0383u
rds_10 118 119 33143.421528
cgs_10 3 119 3.6223f
cgd_10 3 118 7.885674e-16
 
* M11 7 6 vdd vdd pch3 L=0.5u W=2u
rd_11 7 120 720.0000m
rs_11 0 121 720.0000m
capbd_11 120 0 1.9221f
capbs_11 121 0 1.9221f
gm_11 120 121 6 0 24.7993u
rds_11 120 121 47608.3924074
cgs_11 6 121 3.4563f
cgd_11 6 120 9.517322e-16
 
* M12 5 4 vdd vdd pch3 L=0.5u W=2u
rd_12 5 122 720.0000m
rs_12 0 123 720.0000m
capbd_12 122 0 1.9221f
capbs_12 123 0 1.9221f
gm_12 122 123 4 0 61.2942u
rds_12 122 123 29920.143138
cgs_12 4 123 3.6772f
cgd_12 4 122 7.418356e-16
 
* M13 11 12 gnd gnd nch3 L=0.5u W=2u
rd_13 11 124 680.0000m
rs_13 0 125 680.0000m
capbd_13 124 0 2.0204f
capbs_13 125 0 2.0204f
gm_13 124 125 12 0 169.4111u
rds_13 124 125 447287.203113
cgs_13 12 125 3.2281f
cgd_13 12 124 6.270023e-16
 
* M14 6 1 11 11 nch3 L=0.5u W=2u
rd_14 6 126 680.0000m
rs_14 11 127 680.0000m
capbd_14 126 11 2.0204f
capbs_14 127 11 2.0204f
gm_14 126 127 1 11 37.3293u
rds_14 126 127 6204.99825019
cgs_14 1 127 2.8335f
cgd_14 1 126 1.8924f
 
* M15 6 6 vdd vdd pch3 L=0.5u W=2u
rd_15 6 128 720.0000m
rs_15 0 129 720.0000m
capbd_15 128 0 1.9221f
capbs_15 129 0 1.9221f
gm_15 128 129 6 0 44.4765u
rds_15 128 129 3677723.98902
cgs_15 6 129 3.5174f
cgd_15 6 128 5.428009e-16
 
* M16 16 9 11 11 nch3 L=0.5u W=2u
rd_16 16 130 680.0000m
rs_16 11 131 680.0000m
capbd_16 130 11 2.0204f
capbs_16 131 11 2.0204f
gm_16 130 131 9 11 177.2110u
rds_16 130 131 598157.674363
cgs_16 9 131 3.2372f
cgd_16 9 130 6.254884e-16
 
* M17 19 10 11 11 nch3 L=0.5u W=2u
rd_17 19 132 680.0000m
rs_17 11 133 680.0000m
capbd_17 132 11 2.0204f
capbs_17 133 11 2.0204f
gm_17 132 133 10 11 177.2110u
rds_17 132 133 598157.674363
cgs_17 10 133 3.2372f
cgd_17 10 132 6.254884e-16
 
* M18 5 5 gnd gnd nch3 L=0.5u W=2u
rd_18 5 134 680.0000m
rs_18 0 135 680.0000m
capbd_18 134 0 2.0204f
capbs_18 135 0 2.0204f
gm_18 134 135 5 0 211.4857u
rds_18 134 135 979815.794631
cgs_18 5 135 3.2807f
cgd_18 5 134 6.241144e-16
 
* M19 11 5 gnd gnd nch3 L=0.5u W=2u
rd_19 11 136 680.0000m
rs_19 0 137 680.0000m
capbd_19 136 0 2.0204f
capbs_19 137 0 2.0204f
gm_19 136 137 5 0 203.6390u
rds_19 136 137 260994.388621
cgs_19 5 137 3.2854f
cgd_19 5 136 6.288083e-16
 
* M20 14 14 gnd gnd nch3 L=0.5u W=2u
rd_20 14 138 680.0000m
rs_20 0 139 680.0000m
capbd_20 138 0 2.0204f
capbs_20 139 0 2.0204f
gm_20 138 139 14 0 175.1477u
rds_20 138 139 1304319.69815
cgs_20 14 139 3.2246f
cgd_20 14 138 6.241162e-16
 
* M21 13 3 14 14 pch3 L=0.5u W=2u
rd_21 13 140 720.0000m
rs_21 14 141 720.0000m
capbd_21 140 14 1.9221f
capbs_21 141 14 1.9221f
gm_21 140 141 3 14 40.5805u
rds_21 140 141 19487.6312005
cgs_21 3 141 1.1821f
cgd_21 3 140 3.6429f
 
* M22 13 4 vdd vdd pch3 L=0.5u W=2u
rd_22 13 142 720.0000m
rs_22 0 143 720.0000m
capbd_22 142 0 1.9221f
capbs_22 143 0 1.9221f
gm_22 142 143 4 0 31.3870u
rds_22 142 143 13395.3986806
cgs_22 4 143 3.2898f
cgd_22 4 142 1.7249f
 
* M23 15 14 gnd gnd nch3 L=0.5u W=2u
rd_23 15 144 680.0000m
rs_23 0 145 680.0000m
capbd_23 144 0 2.0204f
capbs_23 145 0 2.0204f
gm_23 144 145 14 0 110.1690u
rds_23 144 145 16247.1648697
cgs_23 14 145 3.2172f
cgd_23 14 144 8.941871e-16
 
* M24 17 13 15 15 nch3 L=0.5u W=2u
rd_24 17 146 680.0000m
rs_24 15 147 680.0000m
capbd_24 146 15 2.0204f
capbs_24 147 15 2.0204f
gm_24 146 147 13 15 23.6406u
rds_24 146 147 3393.12586631
cgs_24 13 147 2.6599f
cgd_24 13 146 2.2814f
 
* M25 18 16 15 15 nch3 L=0.5u W=2u
rd_25 18 148 680.0000m
rs_25 15 149 680.0000m
capbd_25 148 15 2.0204f
capbs_25 149 15 2.0204f
gm_25 148 149 16 15 100.0838u
rds_25 148 149 853169.524785
cgs_25 16 149 3.0002f
cgd_25 16 148 6.269117e-16
 
* M26 17 18 vdd vdd pch3 L=0.5u W=2u
rd_26 17 150 720.0000m
rs_26 0 151 720.0000m
capbd_26 150 0 1.9221f
capbs_26 151 0 1.9221f
gm_26 150 151 18 0 47.2125u
rds_26 150 151 4698400.28867
cgs_26 18 151 3.5294f
cgd_26 18 150 5.425203e-16
 
* M27 18 18 vdd vdd pch3 L=0.5u W=2u
rd_27 18 152 720.0000m
rs_27 0 153 720.0000m
capbd_27 152 0 1.9221f
capbs_27 153 0 1.9221f
gm_27 152 153 18 0 46.6912u
rds_27 152 153 3350476.6053
cgs_27 18 153 3.5300f
cgd_27 18 152 5.42813e-16
 
* M28 27 20 gnd gnd nch3 L=0.5u W=2u
rd_28 27 154 680.0000m
rs_28 0 155 680.0000m
capbd_28 154 0 2.0204f
capbs_28 155 0 2.0204f
gm_28 154 155 20 0 78.1335u
rds_28 154 155 2447218.39369
cgs_28 20 155 2.8069f
cgd_28 20 154 6.247024e-16
 
* M29 28 20 gnd gnd nch3 L=0.5u W=2u
rd_29 28 156 680.0000m
rs_29 0 157 680.0000m
capbd_29 156 0 2.0204f
capbs_29 157 0 2.0204f
gm_29 156 157 20 0 78.1335u
rds_29 156 157 2447218.39369
cgs_29 20 157 2.8069f
cgd_29 20 156 6.247024e-16
 
* M30 20 1 27 27 nch3 L=0.5u W=2u
rd_30 20 158 680.0000m
rs_30 27 159 680.0000m
capbd_30 158 27 2.0204f
capbs_30 159 27 2.0204f
gm_30 158 159 1 27 77.2410u
rds_30 158 159 948766.603416
cgs_30 1 159 2.8281f
cgd_30 1 158 6.278147e-16
 
* M31 21 1 28 28 nch3 L=0.5u W=2u
rd_31 21 160 680.0000m
rs_31 28 161 680.0000m
capbd_31 160 28 2.0204f
capbs_31 161 28 2.0204f
gm_31 160 161 1 28 77.2410u
rds_31 160 161 948766.603416
cgs_31 1 161 2.8281f
cgd_31 1 160 6.278147e-16
 
* M32 20 3 16 16 pch3 L=0.5u W=2u
rd_32 20 162 720.0000m
rs_32 16 163 720.0000m
capbd_32 162 16 1.9221f
capbs_32 163 16 1.9221f
gm_32 162 163 3 16 25.9112u
rds_32 162 163 51512.1388355
cgs_32 3 163 3.4703f
cgd_32 3 162 8.978464e-16
 
* M33 21 3 19 19 pch3 L=0.5u W=2u
rd_33 21 164 720.0000m
rs_33 19 165 720.0000m
capbd_33 164 19 1.9221f
capbs_33 165 19 1.9221f
gm_33 164 165 3 19 25.9112u
rds_33 164 165 51512.1388355
cgs_33 3 165 3.4703f
cgd_33 3 164 8.978464e-16
 
* M34 16 17 vdd vdd pch3 L=0.5u W=2u
rd_34 16 166 720.0000m
rs_34 0 167 720.0000m
capbd_34 166 0 1.9221f
capbs_34 167 0 1.9221f
gm_34 166 167 17 0 64.9556u
rds_34 166 167 52700.0890632
cgs_34 17 167 3.6786f
cgd_34 17 166 6.354095e-16
 
* M35 19 17 vdd vdd pch3 L=0.5u W=2u
rd_35 19 168 720.0000m
rs_35 0 169 720.0000m
capbd_35 168 0 1.9221f
capbs_35 169 0 1.9221f
gm_35 168 169 17 0 64.9556u
rds_35 168 169 52700.0890632
cgs_35 17 169 3.6786f
cgd_35 17 168 6.354095e-16
 
* M36 22 22 gnd gnd nch3 L=0.5u W=2u
rd_36 22 170 680.0000m
rs_36 0 171 680.0000m
capbd_36 170 0 2.0204f
capbs_36 171 0 2.0204f
gm_36 170 171 22 0 825.3072n
rds_36 170 171 296507145.822
cgs_36 22 171 6.508858e-16
cgd_36 22 170 6.264374e-16
 
* M37 22 21 vdd vdd pch3 L=0.5u W=2u
rd_37 22 172 720.0000m
rs_37 0 173 720.0000m
capbd_37 172 0 1.9221f
capbs_37 173 0 1.9221f
gm_37 172 173 21 0 772.5246n
rds_37 172 173 542593597.396
cgs_37 21 173 7.394612e-16
cgd_37 21 172 5.428865e-16
 
* M38 23 22 gnd gnd nch3 L=0.5u W=2u
rd_38 23 174 680.0000m
rs_38 0 175 680.0000m
capbd_38 174 0 2.0204f
capbs_38 175 0 2.0204f
gm_38 174 175 22 0 855.2413n
rds_38 174 175 348845321.984
cgs_38 22 175 6.512642e-16
cgd_38 22 174 6.264359e-16
 
* M39 24 22 gnd gnd nch3 L=0.5u W=2u
rd_39 24 176 680.0000m
rs_39 0 177 680.0000m
capbd_39 176 0 2.0204f
capbs_39 177 0 2.0204f
gm_39 176 177 22 0 843.3865n
rds_39 176 177 334616028.108
cgs_39 22 177 6.511048e-16
cgd_39 22 176 6.264363e-16
 
* M40 23 23 gnd gnd nch3 L=0.5u W=2u
rd_40 23 178 680.0000m
rs_40 0 179 680.0000m
capbd_40 178 0 2.0204f
capbs_40 179 0 2.0204f
gm_40 178 179 23 0 211.9413u
rds_40 178 179 976467.141881
cgs_40 23 179 3.2813f
cgd_40 23 178 6.241144e-16
 
* M41 26 23 gnd gnd nch3 L=0.5u W=2u
rd_41 26 180 680.0000m
rs_41 0 181 680.0000m
capbd_41 180 0 2.0204f
capbs_41 181 0 2.0204f
gm_41 180 181 23 0 143.1755n
rds_41 180 181 3898.86804164
cgs_41 23 181 2.5485f
cgd_41 23 180 2.3708f
 
* M42 23 3 vdd vdd pch3 L=0.5u W=2u
rd_42 23 182 720.0000m
rs_42 0 183 720.0000m
capbd_42 182 0 1.9221f
capbs_42 183 0 1.9221f
gm_42 182 183 3 0 61.1202u
rds_42 182 183 29321.6437713
cgs_42 3 183 3.6765f
cgd_42 3 182 7.484303e-16
 
* M43 24 24 vdd vdd pch3 L=0.5u W=2u
rd_43 24 184 720.0000m
rs_43 0 185 720.0000m
capbd_43 184 0 1.9221f
capbs_43 185 0 1.9221f
 
* M44 26 24 vdd vdd pch3 L=0.5u W=2u
rd_44 26 186 720.0000m
rs_44 0 187 720.0000m
capbd_44 186 0 1.9221f
capbs_44 187 0 1.9221f
 

 
* compensation capacitors 
 
C1 21 25 20p
 
R1 1 2  100
 
R2 3 4 100
 
R3 25 26 100
 

 
* Load capacitor
 
C2 26 0 30p
 

 
* analysis----------------------------------------------
 
.options list node post=1 unwrapp
 
.op
 
.ac dec 10 1 1g 
 
.print ac VDB(26) VP(26) 
 

 
.measure ac   'unitfreq'  	trig at=1 targ vdb(26) val=0 fall=1
 

 
.measure ac   'phasemargin'  	find par('vp(26)+180') when vdb(26)=0
 

 
.measure ac   'gain(db)' 	max vdb(26)
 

 
.measure ac   'gain(mag)' 	max vm(26)
 

 
.END
 
